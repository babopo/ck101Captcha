function [y1] = myNNet(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 16-Apr-2017 22:35:06.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = 16xQ matrix, input #1
% and returns:
%   y = 5xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;14;0;0;0];
x1_step1.gain = [0.0408163265306122;0.0408163265306122;0.0408163265306122;0.0408163265306122;0.0408163265306122;0.0408163265306122;0.0476190476190476;0.0425531914893617;0.0408163265306122;0.0408163265306122;0.0408163265306122;0.0408163265306122;0.0571428571428571;0.0408163265306122;0.0408163265306122;0.0408163265306122];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.0324471131236077;2.2066298379237663;-1.8943842630063978;-1.9417392670347242;-1.8266314398118104;-1.5242213423271511;-1.785379392896663;0.83416029625463439;-0.2192072160607573;-1.4058937441797295;0.9692517461737854;-1.177222140683797;-0.12899250373915813;0.65308119015894639;0.99615944902235332;-0.18816719885093422;0.82107546670263853;0.29836052502907956;1.0478647669383172;0.35327077726318867;0.4150673175449891;0.30905877733131859;-0.51160013390576309;-0.75317502381949675;-0.39432702241123702;-0.14803394638325587;-0.97764648173847757;-1.4313777665035228;1.5318175459865337;-2.1681758687495178;0.88725270747775831;-2.3412941408717791;1.3374717298388439;2.5787495084736727;-1.4213636817342288];
IW1_1 = [0.45469570354970446 -0.47728463069028132 -0.76458591280211574 -0.20521810132728208 0.99407150220812779 -0.15359650297582672 -0.13396036364994202 -0.9762140221792972 0.54320787185445096 0.48229329660082948 0.038069300012752973 -0.10193173346219833 -0.56201137554551694 -0.86506499414672045 -0.42452729514465076 0.60390846785813312;0.18199642637777519 -0.69684194524931153 0.95987535857332151 1.0340901533135802 0.090781349241581683 -0.16890486209803471 -0.48511970441789609 0.092099271739987013 -0.16730677159955062 -1.0213289255826747 -0.53452554161548527 0.15540305562665158 -0.70538516327047007 -0.044625351530852696 1.5571302926180703 0.40643455916540311;0.078833876819657756 0.66273803503405637 0.2549351360943084 0.48990697684152784 -0.010242735635937895 0.2185301247023288 0.026688965853746163 -1.1825980329807519 -0.22703989213543893 -0.17261344787024757 0.30003083373091627 -1.3902282461012856 0.15810039101292636 -0.50329836021238117 -0.82006600555393172 0.89276632457348037;0.30061864455387061 0.12233257656835998 0.84574183767358102 0.66384691179863742 1.2464533114044571 -0.56365662726387289 -0.16913581939061351 0.50823149799460154 0.66163704890687891 -0.71278024516268745 -0.51682005719931889 0.55900788511323818 -0.14087889376816426 -0.2162574111619493 -0.28520722011174171 -0.21237652899637074;1.3572486599476625 -1.286447595572741 0.34596987733835194 1.6871775547905725 0.25539338803009998 -0.84885623403945965 -0.52345153973728731 1.1455678816803621 0.61119649774114659 -0.31416865672230454 -0.74042954711257014 -0.25473635080269535 0.33530545204765488 -0.25410617533764102 -0.47804597513284264 0.37166249817933306;-0.048525232322574233 -0.12852794119844463 0.36631668638533404 0.68004584126487611 -0.4850549824664887 0.35019686142777345 1.3650731021702494 0.89854514323313817 -0.36131384184640564 0.018448192731084202 0.44318909214295188 0.35453742329858384 0.20162063280512876 -0.99281377922232372 -0.86634497686361833 0.50020068069367352;0.45863575521428845 -0.35889377390497523 -0.67887987365602265 -0.85597553439765806 -0.2309329998154874 -0.33069940117858931 0.33490735336660826 -0.1648988784864982 -0.21258037620187359 0.55561842770575809 0.12745599849678324 0.18451713848549953 0.1683275284846879 -0.052578555237718011 -1.1171627624253417 -0.38776645884056293;-0.78878627966123738 -0.65524093350769119 0.093605884822863014 0.60192439870589864 -0.72983397124839222 -0.73411026919636768 -0.23684828951492168 0.3742123364435655 0.77071101066009662 -1.1150602393392359 0.64587272941249452 -0.034586368405758447 -0.690656539383806 0.84088376306817558 0.89576508693982726 0.47990937906927461;1.1406173241712929 0.37903943190242612 -0.043681573683177613 -1.7543817861923328 0.1314889114531245 -0.18469833215567649 -1.2119193490233897 -0.081373232281468227 -0.056176135156961647 0.61919038082479549 0.16216022507382657 1.6393701066662079 -0.27287500577593959 1.4292991867311218 -0.95224442526558528 -1.3941416677598049;0.18098934846557421 0.58569956446201465 0.16952889746157246 -0.52060134846165995 1.1962582481612039 1.1767288184336426 0.39434177742607046 -0.35275671789360113 1.0003020222455619 -0.076367348201512336 0.29669573508507824 -0.65335534271922868 0.19156045860683388 0.025810056309593116 0.50380244463111179 1.0979636258868135;-0.24129757359924439 -0.71072949871554636 -0.58037940653229358 -0.31958047145022306 -0.44242872097217917 -0.1385900396696122 1.4886312814033549 -0.94558898434496552 0.2064537686994056 -0.58712052261284964 -0.27656985254265148 -0.76916482335684999 0.38977061575014799 0.15698201766716049 -0.3949688859017087 -0.95156375478192312;1.0145547057530679 -0.13679819583490088 0.16134580189407804 0.52797905103399456 0.1607645670461916 0.35093244212347058 -0.69031478869492335 0.22997521825862818 -0.73383549165416351 -0.91992613282391567 -0.44885350021499909 -1.2015076839154637 0.7979271660970626 0.3040165642950286 -0.56698052864482074 0.21679607019836014;-1.3309786003973489 -0.73557104386372596 0.062009933137633859 -0.1398994788014685 -0.29625490574921526 0.38287542410292102 0.20622778172182024 -0.30423039288212578 -0.33638694673170261 0.68050714445459326 0.17895053990396992 0.3352814368631748 0.49685121104919039 -0.28194398820366373 -0.022505009877615778 -0.18073868709880928;-0.95487489335905396 -1.2117919745438803 -0.21437577718667469 0.33941324395757932 0.63631611137906707 0.821632180907508 0.50479564380797204 0.61021426223646302 0.77198675138465045 0.34245641254556097 0.4252514791607484 -0.091068353595657903 0.299013996846904 -0.80616827261099777 0.061293178967268068 -0.73400213596844799;-0.25921384524325936 -0.49237770396681618 -0.10519008985313211 -0.47818100532694957 -0.11212220259158232 -0.26504843930283273 -0.61428537668241845 -0.19864489887604372 0.74710518974577778 -0.49816005799579144 -0.57555535534622604 1.8411622216663828 0.23567101807172355 -0.70459533069507718 0.091704626186931884 0.8078924149441129;0.84230378737874179 -0.3918207390817649 -0.79465772625655384 -0.15555787695846643 -0.14472712411983721 -0.44786543621747715 0.3690204523686601 0.15915056080175843 -0.027156276765845221 0.96291441665543598 -0.78747230862084616 -0.47292218451296197 -0.22373568434786859 0.4613814678746973 -1.5480673089359489 -1.1690426522972273;1.3184783428574236 -0.59181688538159072 -0.022503823906544762 0.61340657444607105 0.35408966281721471 -0.81247528960790705 0.10662836822504368 0.74611136568688718 -0.36239226311614681 0.59895457598645341 -1.1044321803856707 -0.15825251936087484 0.46314956938041679 -0.76584806368483438 0.79085272928887862 0.15447555315536379;-0.39145399305678819 -0.52168478259909024 0.25485267314884397 0.54237008051471713 -0.31038518807771193 -0.52062344062217469 0.31298931853725531 0.46146580319465447 0.77486584156777261 -0.2295916161235991 0.42482684821433875 0.35468053826954909 -0.17803387655491171 1.1670538112164874 1.15671727676 0.16799353483416526;-0.73808485535047275 1.5961331709647235 1.3151343719799089 -0.20368039491380785 -1.3043258210075255 -0.7772943187762853 -0.22719481368004565 2.0675504696083231 -0.82957557234577239 -0.4266931857272227 0.53370644319445193 2.0961081793322172 -0.25710438705876415 -0.4304612824089874 -0.69751097405792195 0.21324708342356907;0.87923973242349485 0.10019385191149033 -0.39455196540933263 1.7502649391816065 -0.12504895420860565 0.23621180945342884 0.32152128898395377 -0.77045517119778673 -0.27270983888855588 0.36015900800292594 0.82849030930113954 -1.0167491100241495 -0.51931826139591986 -0.38972626663789989 0.93249806935984636 -0.25987801629746926;-0.83089157536220581 0.31393674330920562 -1.242436653624865 1.0262558937354866 -0.0649660768486746 0.1810750090082123 0.21521034796774641 1.1810629134534834 0.15532584681863651 -0.68783083856026339 0.66815395532383126 0.33020568516344501 -0.43111323347930197 0.73435996675257631 -0.60457757804407508 0.1158121296480913;-0.22599061938613371 -0.84759757841437056 0.09137181787424381 -0.91899074711980211 -0.48156188117889986 -0.067663338082519578 0.22242902722643049 -0.13497176903977018 -0.057061168437782958 0.014371288438655766 0.860412060363689 0.14494167706122654 0.61996580653872069 0.33183844170861326 -0.23002501774124473 -1.1096119295200666;0.092340618876661229 0.85130274920168758 0.71562651206988437 -0.94229005154161938 0.30453911721607207 -0.61685573855583786 -0.15467695710286689 -0.10723593896381878 0.41941999267955099 1.3240542189376407 0.34763491913602462 1.3996375600878219 -0.20951197532553156 -0.45627463374189203 -0.70319449177913473 -0.79863245779890291;-1.2115220802915705 0.59626282767918981 -0.34292258605408865 0.028265555413401373 -0.38978512158884776 -0.61189963233826761 -1.0916289476416348 -0.80989728449105125 -0.96486319613284521 -0.22913694823671937 -0.030255386062147206 -0.9630025906046028 0.040605221704005032 1.3145805587958246 1.6257414790563427 0.75942883494206359;-0.39584010961997662 -0.077167171674846186 0.21689067854736416 -0.28707492717154609 0.37659248802001583 0.61584584244334661 -0.98406319776952567 -0.36312840082951475 0.20635491231032524 0.31515948036474184 0.46957189285136858 0.82834319140358326 -0.39414949276443967 -0.90144977710404106 -0.4583766279978353 -0.027477386383881294;-1.1696739798423463 -0.10871097562466261 -0.28885258316463824 0.073341547400969057 -1.086270302558799 -0.31384313544734366 -0.82546644651016188 0.87477551892326855 -0.36110319462582702 0.090464474755271904 0.34168942136879515 1.1208921965455463 -0.13338497838993518 0.28229531568002203 1.0084909438878435 0.91030845651147885;-0.79871935268049632 0.58617548536363551 -0.32471118288929829 -1.1960797574736393 0.24240813805099368 0.32569408300261887 0.83351417651625448 -0.94786840735511335 1.0578467925656831 0.35534822276717437 -0.53793754693178919 -0.023476123900517971 0.75229143747177329 0.71529996123849016 -0.63866722073617421 1.4902544736549614;-0.60478741716673945 -0.46705293288838912 0.30702714118432078 0.66170294908450844 0.13342638037847987 -0.014533727878814294 0.29042984565341601 0.4319664215748793 -0.47447840662779001 1.0540469983068506 0.18661641941975035 0.30275388782130447 0.16467870197459031 -0.18175355526858297 0.0056836143700424871 0.7485052846488307;0.91968975498933647 -0.29769830644892253 0.30158419922715185 0.50317064223825214 -0.2338355812091355 -0.027470348720884202 -0.27826114035157745 -0.028261892382187459 0.46730205008145698 -0.45142741926248409 0.28654724863993325 0.46889168426236572 0.69706054519924576 -0.0094780881492433789 0.49175626401592798 0.36745845630202156;-0.77012970902516709 0.53922970362486167 -0.1364694138655603 0.51948912123115087 -0.82298084746860245 -0.093992328350326781 -0.37896796807897976 0.36831921835484094 0.48453192937381301 -0.66058540452779502 -1.0519221645753476 -0.90137321745109322 -0.88449841882907621 -0.67009178865033969 1.2228180984151855 0.81314339748986508;0.12707688034971551 0.28397416406004522 0.58960200879619007 0.23905335751336532 -0.09568914850962329 0.70638972903487163 -0.93870856605011332 0.19730493497942606 -0.11955660205750551 0.5029930948158442 -0.7160649260642763 0.9121219733972028 -1.1235914919692536 -0.013841660033929983 -1.1205823352852129 -1.0415686275883211;-0.69120348290498046 -0.87935044610745283 -0.60632601915488815 0.54792056177649884 -0.57343800795596955 -0.65124237471834834 -1.2275158321261672 0.22082946396354128 0.24586575110237133 -0.46361323923316555 -0.22146150189148853 1.6828823887067752 -0.26293239779161953 0.34003852376845239 0.45811619208722465 0.92728085704327146;0.47779476097003309 -0.053029487463744994 0.43561270152197484 0.82360872808520325 -0.15742531973982743 0.22536679098250439 -0.30408145261263303 -0.46166514126791969 0.218347583364185 -0.3614301913080053 -0.89307792082048854 0.53885049045924671 0.51466766518054663 0.041455803280436465 -0.31431577847487002 -0.67831004574519604;-0.014699877727584472 0.10452702229644691 -1.5673558173594742 -0.65463483128396982 -0.649965904779368 0.6086213267078574 -0.32177142037147266 0.83769532463699792 0.39388468690404721 0.075870020912880087 -0.23692146851276261 0.70707990013042676 0.24607296542023052 -0.76341669978303639 -0.2664519118069068 -0.17293857127774498;-0.49929683148906728 0.81219702289460627 0.35045546946837108 0.87343286768164852 -0.75029105779896155 1.0938493005113492 0.070221618962109392 0.11864912892376717 0.19845005825207904 -0.023996963933408312 -0.52277550854205479 -0.084249682379074722 -0.19899292960714882 -1.1089350183926479 -0.66059831589003803 -0.80466742304520533];

% Layer 2
b2 = [0.72920369278271613;0.0025387686356467161;0.48797281251111319;0.95611290118992487;-0.9976727838526539];
LW2_1 = [0.49485402871102657 -0.24488587910265197 -0.40234514251626741 0.75876939822797473 -0.090449137408309524 -0.20751123782605269 0.51359902044865147 -1.2044521185537671 0.97987875368335953 -0.23815320686264912 -1.2740313945116164 -0.02847223692159629 -0.44103066190267204 -1.4261683273324524 -1.4918755545688336 0.17130928511333579 0.0056443122023341697 -0.089798081513453448 -2.0029226828635056 0.36827303596994238 1.2610887863474136 0.61139767026728697 0.68715995866371304 0.3493724291959216 0.78126940724354454 1.0276585834832295 -0.68513835373115806 0.20856233175472336 -0.39334583181512162 -1.2318099599058339 0.96753544344105846 0.52859401865162892 0.10777902502230954 -1.3903279923478202 -1.8935971360900028;-1.0743593727805223 -2.3370582652821854 -0.26003703492545904 0.39140307002845748 1.8271230198710262 -1.6102035811061235 0.41166152832593134 -0.85380841728470991 -2.2406969768122238 1.4427995732658023 0.48865351708574767 -0.80216370934238868 0.041257420679983205 -0.19490765520212017 0.18870992007476428 -0.1660575733678423 -1.6227045563188978 -0.78349792738804169 2.7691186726459174 1.1017241544774456 -0.44954033285651213 0.89324760871099784 -0.54394648635889664 -1.2437505567230431 -0.43393988207224959 -0.61576270751944429 -0.54278310246640116 0.1291594339025107 -0.17779427609291193 0.78092226520840025 0.020055686631226921 1.1265203939228552 -0.03129282070955694 -0.67417292677447149 0.11662009112022104;1.1832377215922754 -0.11694291155654049 -0.43200820816349672 -1.3760920588231926 -1.6024744579227086 1.0319520849086441 1.2599974665636959 0.69651891389080411 0.34248444391353217 0.44843835629484824 -0.86086780843856647 -0.85169427751475613 -0.49950645886867368 0.99652039182443675 0.94616317014487583 0.35934017776075217 1.0430452050252708 -0.19182251411443468 -0.27855049866243425 0.67633917955984579 0.45871436848786118 -0.67666610082318213 -0.67101818535843571 1.1603635377708499 0.38277687466204063 0.51994312155831512 -0.79063204550543953 0.500388195015259 0.29474514124339063 1.7275769185308147 -0.72743538654120854 -1.0937993408828954 0.17494204232993402 1.1247129751584017 0.6019281868471682;-0.49095910570368434 -0.22154999042469534 -0.17574882499417491 0.57701109906098758 -0.12514084468532433 0.38012740728677213 -1.1644958851401037 -0.26759384197881425 -0.13188150110273358 -0.55273970630345182 1.1479169007255845 -0.60873029382746047 0.034274192354552833 1.1074104563357767 -0.60663072867892387 -1.9691542659444348 0.22204185725092151 -0.6390726148912752 -1.4112000423405793 1.3213884879769688 1.3546403594172618 -0.77517944421458673 1.4268911377998874 0.62451334673041237 0.03710661317499013 1.7971614596067802 0.90506994374695693 -0.81501582645331483 -1.138811212961377 -2.0255796881944739 -0.83356230342386517 1.9123045584912104 0.20047775173437757 0.81720766506239806 1.0005344597075478;-1.1846130762986493 0.78834685482371658 1.6419720936159385 -0.54310593350856629 1.0046233623003629 0.35463844485362644 -0.70520245941039472 1.1257382798207423 1.5612565381847345 0.46648716493179321 0.8176038206885089 0.89586539074082439 -0.49971784880915893 0.64531172022902306 -0.046555018806533052 0.44739466508663911 -0.43280778743906401 0.45510127995740834 -0.17414365362214435 -1.2911652811885781 -0.3095657301370946 1.1865809353039696 -1.070281276585449 -0.80671985432132276 0.41993739899858007 0.013194949875980619 0.98790594434280554 0.099337598340001748 -0.027482486575192214 -0.15710631675386288 0.49535251157284993 -1.5557138543875813 -0.78948562866762706 0.26637520646876295 0.49786562024594233];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);

% Output 1
y1 = a2;
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
